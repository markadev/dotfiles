#!/usr/bin/python

import getopt, random, struct, sys


cset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ" + "0123456789"
punct_cset = "~!@#$%^&*()-_=+[]\{}|;:,./<>?"
def generate_password(length):
    rng = random.SystemRandom()
    password_chars = []

    # Select some punctuation
    for i in xrange(length/3):
        password_chars.append(rng.choice(punct_cset))

    # Select the characters to use
    while len(password_chars) < length:
        password_chars.append(rng.choice(cset))

    # Shuffle the characters
    random.shuffle(password_chars, rng.random)

    return ''.join(password_chars)


def main():
    try:
        opts, args = getopt.getopt(sys.argv[1:], "", [ "length=" ])
    except getopt.GetoptError:
        #usage()
        sys.exit(1)

    passwordLen = 10
    for o, a in opts:
        if o == "--length":
            passwordLen = int(a)

    print generate_password(passwordLen)


if __name__ == "__main__":
    main()



# vim:set ts=4 sw=4 expandtab:
